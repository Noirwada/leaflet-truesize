const Playground = {
  init(_containerID, _data, _options = {}) {
    this._container = document.querySelector(_containerID);

    this._map = this.mountMap(this._container);
    this._plugin = this.mountPlugin(this._map, _data, _options);
    this.addButtonHandler(this._container, this._map, this._plugin);
  },

  mountMap(_container) {
    const mapNode = _container.querySelector('.map');

    const map = L.map(mapNode, {
      center: [40, 60],
      zoom: 3,
      zoomControl: false,
      zoomDelta: .25,
      zoomSnap: .25
    });

    new L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png', {
      attribution: `attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>`,
      detectRetina: true
    }).addTo(map);

    return map;
  },

  mountPlugin(_map, _data, _options) {
    return new L.TrueSize(_data, _options).addTo(_map);
  },

  addButtonHandler(_container, _map, _plugin) {
    const removeBtn = _container.querySelector('.remove');
    removeBtn.addEventListener('click', () => _map.removeLayer(_plugin));
  },
}

const polygon = {
  "type": "Feature",
  "properties": {},
  "geometry": {
    "type": "Polygon",
    "coordinates": [
      [
        [77.837451, 35.49401],
        [78.912269, 34.321936],
        [78.811086, 33.506198],
        [79.208892, 32.994395],
        [79.176129, 32.48378],
        [78.458446, 32.618164],
        [78.738894, 31.515906],
        [79.721367, 30.882715],
        [81.111256, 30.183481],
        [80.476721, 29.729865],
        [80.088425, 28.79447],
        [81.057203, 28.416095],
        [81.999987, 27.925479],
        [83.304249, 27.364506],
        [84.675018, 27.234901],
        [85.251779, 26.726198],
        [86.024393, 26.630985],
        [87.227472, 26.397898],
        [88.060238, 26.414615],
        [88.174804, 26.810405],
        [88.043133, 27.445819],
        [88.120441, 27.876542],
        [88.730326, 28.086865],
        [88.814248, 27.299316],
        [88.835643, 27.098966],
        [89.744528, 26.719403],
        [90.373275, 26.875724],
        [91.217513, 26.808648],
        [92.033484, 26.83831],
        [92.103712, 27.452614],
        [91.696657, 27.771742],
        [92.503119, 27.896876],
        [93.413348, 28.640629],
        [94.56599, 29.277438],
        [95.404802, 29.031717],
        [96.117679, 29.452802],
        [96.586591, 28.83098],
        [96.248833, 28.411031],
        [97.327114, 28.261583],
        [97.402561, 27.882536],
        [97.051989, 27.699059],
        [97.133999, 27.083774],
        [96.419366, 27.264589],
        [95.124768, 26.573572],
        [95.155153, 26.001307],
        [94.603249, 25.162495],
        [94.552658, 24.675238],
        [94.106742, 23.850741],
        [93.325188, 24.078556],
        [93.286327, 23.043658],
        [93.060294, 22.703111],
        [93.166128, 22.27846],
        [92.672721, 22.041239],
        [92.146035, 23.627499],
        [91.869928, 23.624346],
        [91.706475, 22.985264],
        [91.158963, 23.503527],
        [91.46773, 24.072639],
        [91.915093, 24.130414],
        [92.376202, 24.976693],
        [91.799596, 25.147432],
        [90.872211, 25.132601],
        [89.920693, 25.26975],
        [89.832481, 25.965082],
        [89.355094, 26.014407],
        [88.563049, 26.446526],
        [88.209789, 25.768066],
        [88.931554, 25.238692],
        [88.306373, 24.866079],
        [88.084422, 24.501657],
        [88.69994, 24.233715],
        [88.52977, 23.631142],
        [88.876312, 22.879146],
        [89.031961, 22.055708],
        [88.888766, 21.690588],
        [88.208497, 21.703172],
        [86.975704, 21.495562],
        [87.033169, 20.743308],
        [86.499351, 20.151638],
        [85.060266, 19.478579],
        [83.941006, 18.30201],
        [83.189217, 17.671221],
        [82.192792, 17.016636],
        [82.191242, 16.556664],
        [81.692719, 16.310219],
        [80.791999, 15.951972],
        [80.324896, 15.899185],
        [80.025069, 15.136415],
        [80.233274, 13.835771],
        [80.286294, 13.006261],
        [79.862547, 12.056215],
        [79.857999, 10.357275],
        [79.340512, 10.308854],
        [78.885345, 9.546136],
        [79.18972, 9.216544],
        [78.277941, 8.933047],
        [77.941165, 8.252959],
        [77.539898, 7.965535],
        [76.592979, 8.899276],
        [76.130061, 10.29963],
        [75.746467, 11.308251],
        [75.396101, 11.781245],
        [74.864816, 12.741936],
        [74.616717, 13.992583],
        [74.443859, 14.617222],
        [73.534199, 15.990652],
        [73.119909, 17.92857],
        [72.820909, 19.208234],
        [72.824475, 20.419503],
        [72.630533, 21.356009],
        [71.175273, 20.757441],
        [70.470459, 20.877331],
        [69.16413, 22.089298],
        [69.644928, 22.450775],
        [69.349597, 22.84318],
        [68.176645, 23.691965],
        [68.842599, 24.359134],
        [71.04324, 24.356524],
        [70.844699, 25.215102],
        [70.282873, 25.722229],
        [70.168927, 26.491872],
        [69.514393, 26.940966],
        [70.616496, 27.989196],
        [71.777666, 27.91318],
        [72.823752, 28.961592],
        [73.450638, 29.976413],
        [74.42138, 30.979815],
        [74.405929, 31.692639],
        [75.258642, 32.271105],
        [74.451559, 32.7649],
        [74.104294, 33.441473],
        [73.749948, 34.317699],
        [74.240203, 34.748887],
        [75.757061, 34.504923],
        [76.871722, 34.653544],
        [77.837451, 35.49401]
      ]
    ]
  }
};

const linestring = {
  "type": "Feature",
  "properties": {},
  "geometry": {
    "type": "LineString",
    "coordinates": [
      [
        4.350585937499999,
        54.470037612805754
      ],
      [
        8.61328125,
        54.77534585936447
      ],
      [
        11.42578125,
        54.67383096593114
      ]
    ]
  }
}

const multiPolygon = {
  "type": "Feature",
  "id": "CHN",
  "properties": {
    "name": "China"
  },
  "geometry": {
    "type": "MultiPolygon",
    "coordinates": [
      [
        [
          [110.339188, 18.678395],
          [109.47521, 18.197701],
          [108.655208, 18.507682],
          [108.626217, 19.367888],
          [109.119056, 19.821039],
          [110.211599, 20.101254],
          [110.786551, 20.077534],
          [111.010051, 19.69593],
          [110.570647, 19.255879],
          [110.339188, 18.678395]
        ]
      ],
      [
        [
          [127.657407, 49.76027],
          [129.397818, 49.4406],
          [130.582293, 48.729687],
          [130.987282, 47.790132],
          [132.506672, 47.78897],
          [133.373596, 48.183442],
          [135.026311, 48.47823],
          [134.500814, 47.57844],
          [134.112362, 47.212467],
          [133.769644, 46.116927],
          [133.097127, 45.144066],
          [131.883454, 45.321162],
          [131.025212, 44.967953],
          [131.288555, 44.11152],
          [131.144688, 42.92999],
          [130.633866, 42.903015],
          [130.640016, 42.395009],
          [129.994267, 42.985387],
          [129.596669, 42.424982],
          [128.052215, 41.994285],
          [128.208433, 41.466772],
          [127.343783, 41.503152],
          [126.869083, 41.816569],
          [126.182045, 41.107336],
          [125.079942, 40.569824],
          [124.265625, 39.928493],
          [122.86757, 39.637788],
          [122.131388, 39.170452],
          [121.054554, 38.897471],
          [121.585995, 39.360854],
          [121.376757, 39.750261],
          [122.168595, 40.422443],
          [121.640359, 40.94639],
          [120.768629, 40.593388],
          [119.639602, 39.898056],
          [119.023464, 39.252333],
          [118.042749, 39.204274],
          [117.532702, 38.737636],
          [118.059699, 38.061476],
          [118.87815, 37.897325],
          [118.911636, 37.448464],
          [119.702802, 37.156389],
          [120.823457, 37.870428],
          [121.711259, 37.481123],
          [122.357937, 37.454484],
          [122.519995, 36.930614],
          [121.104164, 36.651329],
          [120.637009, 36.11144],
          [119.664562, 35.609791],
          [119.151208, 34.909859],
          [120.227525, 34.360332],
          [120.620369, 33.376723],
          [121.229014, 32.460319],
          [121.908146, 31.692174],
          [121.891919, 30.949352],
          [121.264257, 30.676267],
          [121.503519, 30.142915],
          [122.092114, 29.83252],
          [121.938428, 29.018022],
          [121.684439, 28.225513],
          [121.125661, 28.135673],
          [120.395473, 27.053207],
          [119.585497, 25.740781],
          [118.656871, 24.547391],
          [117.281606, 23.624501],
          [115.890735, 22.782873],
          [114.763827, 22.668074],
          [114.152547, 22.22376],
          [113.80678, 22.54834],
          [113.241078, 22.051367],
          [111.843592, 21.550494],
          [110.785466, 21.397144],
          [110.444039, 20.341033],
          [109.889861, 20.282457],
          [109.627655, 21.008227],
          [109.864488, 21.395051],
          [108.522813, 21.715212],
          [108.05018, 21.55238],
          [107.04342, 21.811899],
          [106.567273, 22.218205],
          [106.725403, 22.794268],
          [105.811247, 22.976892],
          [105.329209, 23.352063],
          [104.476858, 22.81915],
          [103.504515, 22.703757],
          [102.706992, 22.708795],
          [102.170436, 22.464753],
          [101.652018, 22.318199],
          [101.80312, 21.174367],
          [101.270026, 21.201652],
          [101.180005, 21.436573],
          [101.150033, 21.849984],
          [100.416538, 21.558839],
          [99.983489, 21.742937],
          [99.240899, 22.118314],
          [99.531992, 22.949039],
          [98.898749, 23.142722],
          [98.660262, 24.063286],
          [97.60472, 23.897405],
          [97.724609, 25.083637],
          [98.671838, 25.918703],
          [98.712094, 26.743536],
          [98.68269, 27.508812],
          [98.246231, 27.747221],
          [97.911988, 28.335945],
          [97.327114, 28.261583],
          [96.248833, 28.411031],
          [96.586591, 28.83098],
          [96.117679, 29.452802],
          [95.404802, 29.031717],
          [94.56599, 29.277438],
          [93.413348, 28.640629],
          [92.503119, 27.896876],
          [91.696657, 27.771742],
          [91.258854, 28.040614],
          [90.730514, 28.064954],
          [90.015829, 28.296439],
          [89.47581, 28.042759],
          [88.814248, 27.299316],
          [88.730326, 28.086865],
          [88.120441, 27.876542],
          [86.954517, 27.974262],
          [85.82332, 28.203576],
          [85.011638, 28.642774],
          [84.23458, 28.839894],
          [83.898993, 29.320226],
          [83.337115, 29.463732],
          [82.327513, 30.115268],
          [81.525804, 30.422717],
          [81.111256, 30.183481],
          [79.721367, 30.882715],
          [78.738894, 31.515906],
          [78.458446, 32.618164],
          [79.176129, 32.48378],
          [79.208892, 32.994395],
          [78.811086, 33.506198],
          [78.912269, 34.321936],
          [77.837451, 35.49401],
          [76.192848, 35.898403],
          [75.896897, 36.666806],
          [75.158028, 37.133031],
          [74.980002, 37.41999],
          [74.829986, 37.990007],
          [74.864816, 38.378846],
          [74.257514, 38.606507],
          [73.928852, 38.505815],
          [73.675379, 39.431237],
          [73.960013, 39.660008],
          [73.822244, 39.893973],
          [74.776862, 40.366425],
          [75.467828, 40.562072],
          [76.526368, 40.427946],
          [76.904484, 41.066486],
          [78.187197, 41.185316],
          [78.543661, 41.582243],
          [80.11943, 42.123941],
          [80.25999, 42.349999],
          [80.18015, 42.920068],
          [80.866206, 43.180362],
          [79.966106, 44.917517],
          [81.947071, 45.317027],
          [82.458926, 45.53965],
          [83.180484, 47.330031],
          [85.16429, 47.000956],
          [85.720484, 47.452969],
          [85.768233, 48.455751],
          [86.598776, 48.549182],
          [87.35997, 49.214981],
          [87.751264, 49.297198],
          [88.013832, 48.599463],
          [88.854298, 48.069082],
          [90.280826, 47.693549],
          [90.970809, 46.888146],
          [90.585768, 45.719716],
          [90.94554, 45.286073],
          [92.133891, 45.115076],
          [93.480734, 44.975472],
          [94.688929, 44.352332],
          [95.306875, 44.241331],
          [95.762455, 43.319449],
          [96.349396, 42.725635],
          [97.451757, 42.74889],
          [99.515817, 42.524691],
          [100.845866, 42.663804],
          [101.83304, 42.514873],
          [103.312278, 41.907468],
          [104.522282, 41.908347],
          [104.964994, 41.59741],
          [106.129316, 42.134328],
          [107.744773, 42.481516],
          [109.243596, 42.519446],
          [110.412103, 42.871234],
          [111.129682, 43.406834],
          [111.829588, 43.743118],
          [111.667737, 44.073176],
          [111.348377, 44.457442],
          [111.873306, 45.102079],
          [112.436062, 45.011646],
          [113.463907, 44.808893],
          [114.460332, 45.339817],
          [115.985096, 45.727235],
          [116.717868, 46.388202],
          [117.421701, 46.672733],
          [118.874326, 46.805412],
          [119.66327, 46.69268],
          [119.772824, 47.048059],
          [118.866574, 47.74706],
          [118.064143, 48.06673],
          [117.295507, 47.697709],
          [116.308953, 47.85341],
          [115.742837, 47.726545],
          [115.485282, 48.135383],
          [116.191802, 49.134598],
          [116.678801, 49.888531],
          [117.879244, 49.510983],
          [119.288461, 50.142883],
          [119.279366, 50.582908],
          [120.18205, 51.643566],
          [120.738191, 51.964115],
          [120.725789, 52.516226],
          [120.177089, 52.753886],
          [121.003085, 53.251401],
          [122.245748, 53.431726],
          [123.571507, 53.458804],
          [125.068211, 53.161045],
          [125.946349, 52.792799],
          [126.564399, 51.784255],
          [126.939157, 51.353894],
          [127.287456, 50.739797],
          [127.657407, 49.76027]
        ]
      ]
    ]
  }
};

const options = {
  style: {
    stroke: true,
    weight: 2,
    color: '#FF00FF',
    lineJoin: 'round',
    opacity: 1
  }
};

Playground.init(
  '#map1',
  linestring,
  options
);